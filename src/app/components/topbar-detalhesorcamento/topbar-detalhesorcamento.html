
<div class="topbar">
  <a *ngIf= "isOrcamento" [routerLink]="['/detalhes-orcamento', orcamentoId]">
    <i class='bx bx-dollar'></i>
  </a>
  <div class="menu-eventograma-wrapper">
    <a (click)="menuEventogramaAberto = !menuEventogramaAberto">
      <i class='bx bx-show'></i>
    </a>
    <div class="menu-eventograma" *ngIf="menuEventogramaAberto" (click)="$event.stopPropagation()">
      <a [routerLink]="['/eventograma', orcamentoId]" (click)="menuEventogramaAberto = false">
        Eventograma
      </a>
      <a [routerLink]="['/cronograma', orcamentoId]" (click)="menuEventogramaAberto = false">
        Cronograma
      </a>
    </div>
  </div>
  <a (click)="abrirMenu()">
    <i class='bx bx-wrench'></i>
  </a>
  <a (click)="abrirModalBanco()">
    <i class='bx bx-edit'></i>
  </a>
</div>

<div class="menu-overlay" *ngIf="menuAberto" (click)="fecharMenu()">
  <div class="menu-container" (click)="$event.stopPropagation()">
    <div class="menu-header"></div>
    <div class="menu-actions">
      <button class="menu-btn" (click)="importarOrcamento()">ðŸ“¥ Importar OrÃ§amento</button>
      <button class="menu-btn" (click)="abrirModal()">ðŸ“¤ Exportar para o Transfere Gov</button>
    </div>
  </div>
</div>

<button class="menu-btn" (click)="abrirModal()">ðŸ“¤ Exportar para o Transfere Gov</button>
<div class="modal-overlay" *ngIf="modalAberto" (click)="fecharModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h2>Exportar para o Transfere Gov</h2>
    <form>
      <div class="form-group">
        <label for="anoProposta">Ano da Proposta:</label>
        <input type="number" id="anoProposta" [(ngModel)]="anoProposta" name="anoProposta" />
      </div>
      <div class="form-group">
        <label for="numeroMeta">NÃºmero da Meta:</label>
        <input type="text" id="numeroMeta" [(ngModel)]="numeroMeta" name="numeroMeta" />
      </div>
      <div class="form-group">
        <label for="numeroSubmeta">NÃºmero da Submeta:</label>
        <input type="text" id="numeroSubmeta" [(ngModel)]="numeroSubmeta" name="numeroSubmeta" />
      </div>
      <div class="modal-buttons">
        <button type="button" class="btn-exportar" (click)="exportarParaTransfereGov()">Exportar</button>
        <button type="button" class="btn-cancelar" (click)="fecharModal()">Cancelar</button>
      </div>
    </form>
  </div>
</div>

<button (click)="abrirModalBanco()">Adicionar Banco</button>

<div class="modal-overlay" *ngIf="modalBancoAberto" (click)="fecharModalBanco()">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Encargos e Banco</h2>
    </div>

    <div class="modal-body">
      <label>Nome:</label>
      <input type="text" [(ngModel)]="nome" />

      <label>Encargos Sociais:</label>
      <div>
        <input type="radio" name="encargos" value="desonerado" [(ngModel)]="encargos" /> Desonerado
        <input type="radio" name="encargos" value="nao-desonerado" [(ngModel)]="encargos" /> NÃ£o desonerado
      </div>

      <label>BDI:</label>
      <input type="text" [(ngModel)]="bdi" />

      <label>Selecione os bancos e perÃ­odos:</label>
      <div class="banco-periodo">
        <input type="text" placeholder="Nome do banco" [(ngModel)]="nomeBanco" />
        <input type="text" placeholder="PerÃ­odo" [(ngModel)]="periodoBanco" />
        <button (click)="adicionarBanco()">Adicionar Banco</button>
      </div>

      <div class="bancos-listados">
        <div *ngFor="let banco of bancos; let i = index" class="banco-item">
          <span>{{ banco.nome }} - {{ banco.periodo }}</span>
          <button class="remover-btn" (click)="removerBanco(i)">Remover</button>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button (click)="salvar()">Salvar</button>
      <button (click)="fecharModalBanco()">Cancelar</button>
    </div>
  </div>
</div>
